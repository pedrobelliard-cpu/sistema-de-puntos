<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti칩n de Innovaci칩n (Dise침o)</title>
    <style>
        /* --- ESTILOS DE DISE칌O (Aqu칤 es donde "maquillamos" la web) --- */
        :root {
            --primary: #2563eb;       /* Azul principal */
            --secondary: #1e293b;     /* Texto oscuro */
            --accent: #10b981;        /* Verde 칠xito */
            --bg: #f1f5f9;            /* Fondo gris claro */
            --card: #ffffff;          /* Blanco tarjetas */
        }

        body { font-family: 'Segoe UI', system-ui, sans-serif; background-color: var(--bg); color: var(--secondary); margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }

        /* HEADER */
        .header { display: flex; justify-content: space-between; align-items: center; background: var(--card); padding: 20px 30px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); margin-bottom: 30px; }
        .header h1 { margin: 0; font-size: 24px; color: var(--secondary); }
        .header p { margin: 5px 0 0; color: #64748b; font-size: 14px; }
        
        .btn-main { background: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 8px; }
        .btn-main:hover { background: #1d4ed8; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2); }

        /* TARJETAS KPI (Indicadores) */
        .kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card { background: var(--card); padding: 25px; border-radius: 12px; border: 1px solid #e2e8f0; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        .kpi-title { font-size: 13px; text-transform: uppercase; letter-spacing: 1px; color: #64748b; font-weight: 700; }
        .kpi-number { font-size: 36px; font-weight: 800; margin-top: 10px; color: var(--secondary); }
        
        /* GR츼FICAS MANUALES (CSS) */
        .charts-section { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 25px; margin-bottom: 30px; }
        .chart-box { background: var(--card); padding: 25px; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        .chart-header { font-weight: bold; margin-bottom: 20px; font-size: 18px; border-bottom: 2px solid #f1f5f9; padding-bottom: 10px; }
        
        .bar-container { display: flex; align-items: center; margin-bottom: 15px; font-size: 14px; }
        .bar-name { width: 100px; text-align: right; padding-right: 15px; font-weight: 500; color: #475569; }
        .bar-bg { flex: 1; background: #f1f5f9; height: 28px; border-radius: 6px; overflow: hidden; position: relative; }
        .bar-fill { height: 100%; display: flex; align-items: center; justify-content: flex-end; padding-right: 10px; color: white; font-weight: bold; font-size: 12px; transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1); }

        /* TABLA */
        .table-box { background: var(--card); border-radius: 12px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        table { width: 100%; border-collapse: collapse; text-align: left; }
        th { background: #f8fafc; padding: 18px 25px; font-size: 12px; text-transform: uppercase; color: #64748b; font-weight: 700; border-bottom: 1px solid #e2e8f0; }
        td { padding: 18px 25px; border-bottom: 1px solid #f1f5f9; color: #334155; }
        tr:last-child td { border-bottom: none; }
        tr:hover { background-color: #f8fafc; }
        .badge { background: #dbeafe; color: #1e40af; padding: 4px 10px; border-radius: 20px; font-size: 12px; font-weight: bold; }

        /* VENTANA MODAL (Formulario) */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(4px); z-index: 100; justify-content: center; align-items: center; }
        .modal-content { background: white; width: 90%; max-width: 450px; padding: 30px; border-radius: 16px; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); animation: slideIn 0.3s ease; }
        
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .form-label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 14px; color: #475569; }
        .form-input { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; margin-bottom: 16px; font-size: 15px; outline: none; transition: border 0.2s; box-sizing: border-box; }
        .form-input:focus { border-color: var(--primary); }
        
        .btn-group { display: flex; gap: 10px; margin-top: 10px; }
        .btn-save { flex: 2; background: var(--secondary); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .btn-cancel { flex: 1; background: transparent; color: #64748b; border: 2px solid #e2e8f0; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .btn-save:hover { background: #0f172a; }
        .btn-cancel:hover { background: #f1f5f9; color: #334155; }

    </style>
</head>
<body>

    <div class="container">
        
        <div class="header">
            <div>
                <h1>Gesti칩n de Innovaci칩n</h1>
                <p>Panel de Control v1.0 (Modo Dise침o)</p>
            </div>
            <button class="btn-main" onclick="abrirModal()">
                <span>+</span> Nuevo Gestor
            </button>
        </div>

        <div class="kpi-grid">
            <div class="card">
                <div class="kpi-title">Total Gestores</div>
                <div class="kpi-number" id="kpi-total">0</div>
            </div>
            <div class="card">
                <div class="kpi-title">Puntos Acumulados</div>
                <div class="kpi-number" id="kpi-puntos" style="color: var(--primary);">0</div>
            </div>
            <div class="card">
                <div class="kpi-title">L칤der Actual</div>
                <div class="kpi-number" id="kpi-lider" style="font-size: 24px; color: var(--accent);">---</div>
            </div>
        </div>

        <div class="charts-section">
            <div class="chart-box">
                <div class="chart-header">游끥 Ranking por Puntos</div>
                <div id="chart-points">
                    </div>
            </div>
            <div class="chart-box">
                <div class="chart-header">游눠 Actividad (Ideas)</div>
                <div id="chart-ideas">
                    </div>
            </div>
        </div>

        <div class="table-box">
            <div class="chart-header" style="margin: 0; padding: 20px 25px; border-bottom: 1px solid #e2e8f0;">
                Listado Detallado
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Departamento</th>
                        <th>Puntos (PI)</th>
                        <th>Talleres</th>
                        <th>Ideas</th>
                    </tr>
                </thead>
                <tbody id="table-body">
                    </tbody>
            </table>
        </div>

    </div>

    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <h2 style="margin-top: 0; margin-bottom: 20px; color: var(--secondary);">Registrar Nuevo Gestor</h2>
            <form id="form-gestor" onsubmit="guardarDatoLocal(event)">
                
                <label class="form-label">Nombre del Colaborador</label>
                <input type="text" id="input-nombre" class="form-input" placeholder="Ej: Maria Gonzalez" required>
                
                <label class="form-label">Departamento</label>
                <select id="input-depto" class="form-input">
                    <option value="Tecnolog칤a">Tecnolog칤a</option>
                    <option value="Recursos Humanos">Recursos Humanos</option>
                    <option value="Ventas">Ventas</option>
                    <option value="Operaciones">Operaciones</option>
                    <option value="Finanzas">Finanzas</option>
                </select>

                <div style="display: flex; gap: 15px;">
                    <div style="flex: 1;">
                        <label class="form-label">Puntos</label>
                        <input type="number" id="input-puntos" class="form-input" placeholder="0" required>
                    </div>
                    <div style="flex: 1;">
                        <label class="form-label">Ideas</label>
                        <input type="number" id="input-ideas" class="form-input" placeholder="0" required>
                    </div>
                </div>

                <div class="btn-group">
                    <button type="button" class="btn-cancel" onclick="cerrarModal()">Cancelar</button>
                    <button type="submit" class="btn-save">Guardar Registro</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // --- SIMULADOR DE DATOS (Memoria Local) ---
        // Al recargar la p치gina, volveremos a estos datos iniciales.
        let datos = [
            { name: "Pedro Belliard", depto: "Tecnolog칤a", points: 1250, talleres: 3, ideas: 5 },
            { name: "Ana Torres", depto: "Recursos Humanos", points: 980, talleres: 2, ideas: 2 },
            { name: "Carlos Ruiz", depto: "Ventas", points: 450, talleres: 0, ideas: 1 }
        ];

        // Funci칩n principal que "pinta" todo en la pantalla
        function renderizar() {
            // 1. Ordenar datos (El que tiene m치s puntos va arriba)
            datos.sort((a, b) => b.points - a.points);

            // 2. Actualizar Tarjetas KPI
            document.getElementById('kpi-total').textContent = datos.length;
            const totalPuntos = datos.reduce((sum, item) => sum + parseInt(item.points), 0);
            document.getElementById('kpi-puntos').textContent = totalPuntos.toLocaleString(); // Pone comas a los miles
            document.getElementById('kpi-lider').textContent = datos.length > 0 ? datos[0].name : "---";

            // 3. Dibujar Gr치fica de Puntos
            const maxPoints = Math.max(...datos.map(d => d.points)) || 100;
            const chartPoints = document.getElementById('chart-points');
            chartPoints.innerHTML = ""; // Limpiar anterior
            
            datos.forEach(d => {
                const percent = (d.points / maxPoints) * 100;
                chartPoints.innerHTML += `
                    <div class="bar-container">
                        <div class="bar-name">${d.name}</div>
                        <div class="bar-bg">
                            <div class="bar-fill" style="width: ${percent}%; background-color: var(--primary);">
                                ${d.points}
                            </div>
                        </div>
                    </div>
                `;
            });

            // 4. Dibujar Gr치fica de Ideas
            const maxIdeas = Math.max(...datos.map(d => d.ideas)) || 10;
            const chartIdeas = document.getElementById('chart-ideas');
            chartIdeas.innerHTML = ""; 
            
            datos.forEach(d => {
                const percent = (d.ideas / maxIdeas) * 100;
                // Usamos otro color (accent)
                chartIdeas.innerHTML += `
                    <div class="bar-container">
                        <div class="bar-name">${d.name}</div>
                        <div class="bar-bg">
                            <div class="bar-fill" style="width: ${percent}%; background-color: var(--accent);">
                                ${d.ideas}
                            </div>
                        </div>
                    </div>
                `;
            });

            // 5. Rellenar Tabla
            const tbody = document.getElementById('table-body');
            tbody.innerHTML = "";
            
            datos.forEach(d => {
                tbody.innerHTML += `
                    <tr>
                        <td style="font-weight: 600;">${d.name}</td>
                        <td><span class="badge">${d.depto}</span></td>
                        <td style="color: var(--primary); font-weight: 800;">${d.points}</td>
                        <td>${d.talleres}</td>
                        <td>${d.ideas}</td>
                    </tr>
                `;
            });
        }

        // Funci칩n para agregar un nuevo dato (Simulaci칩n)
        function guardarDatoLocal(e) {
            e.preventDefault(); // Evita recargar p치gina

            // Capturamos lo que escribiste
            const nuevoGestor = {
                name: document.getElementById('input-nombre').value,
                depto: document.getElementById('input-depto').value,
                points: parseInt(document.getElementById('input-puntos').value) || 0,
                talleres: 0, // Por ahora lo dejamos en 0 fijo
                ideas: parseInt(document.getElementById('input-ideas').value) || 0
            };

            // Lo metemos al arreglo de datos
            datos.push(nuevoGestor);

            // Volvemos a pintar la pantalla
            renderizar();
            cerrarModal();
            
            // Limpiamos el formulario
            document.getElementById('form-gestor').reset();
        }

        // Control de la Ventana Modal
        function abrirModal() { document.getElementById('modal').style.display = 'flex'; }
        function cerrarModal() { document.getElementById('modal').style.display = 'none'; }

        // Arrancar el sistema al cargar
        renderizar();

    </script>
</body>
</html>
